<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./styles/dist/output.css">
    <script src="https://cdn.tailwindcss.com"></script>
    <title>Main page</title>
</head>
<body class="bg-gray-900 h-screen flex items-center justify-center">
    <div class="bg-blue-50 rounded-md p-9 text-center w-fit">
        <h2 class="text-3xl mb-8">Instagram Login Page</h2>
         <form action="" class="grid grid-cols-2 gap-y-5">
            <label class="text-xl text-start" for="email">Username:</label>
            <input class="bg-gray-400 text-white text-base w-56 px-2" type="text" id="username">
            <label class="text-xl text-start" for="password">Password:</label>
            <input class="bg-gray-400 text-white text-base w-56 px-2" type="password" id="password">
            
            <button id="login" class="text-white bg-blue-700 px-5 py-2 mr-2">Login</button>
            <button class="text-white bg-blue-700 px-5 py-2">RESET</button>
         </form>

   </div>
   <script>
         const login=document.getElementById('login')
         login.addEventListener('click',(e)=>{
           e.preventDefault()
           const username=document.getElementById('username').value
           const password=document.getElementById('password').value;
           if(!username||!password)
           {
            return "username and password are required"
           }
           const userdata={
            username,password
           }
           loginuser(userdata)
         })
         const loginuser=async (payload)=>{
            try {
                const resp=await fetch('http://localhost:8000/login',{
                    method:'POST',
                    credentials:'include',
                    redirect:"follow",
                    headers:{'content-type':'application/json',
                             'Access-Control-Allow-Origin':"http://localhost:8000"},
                    body:JSON.stringify(payload)
                })
                const data=await resp.json()
                console.log(data)
               window.location.href="http://localhost:5500/client/index.html"


            } catch (error) {
                console.log(error.message)
            }
         }
   </script>
</body>
</html>